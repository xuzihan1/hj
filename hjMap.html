<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        html,body{
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .left,.right{
            float: left;
            height: 80%;
            margin: 5%;
            margin-top: 3%;
        }
        .left{
            width: 80%;
        }
        .right .top,
        .right .bottom{
            height: 50%;
            margin: 5%;
            border-radius: 5%;
            background: white;
        }
        .dom{
            width: 100%;
            height: 100%;
            margin: 5%;
            border-radius: 5%;
            background: white;
        }

       
    </style>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript"
        src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <!-- <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script> -->
    <script type="text/javascript"
        src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
</head>
<body>
    <div class="left">
        <div class="dom">
            <!-- <div class="dom_content"></div> -->
        </div>
    </div>
</body>
<script>
    var dom = document.getElementsByClassName('dom')[0]
    hjMapEvent()   
    function hjMapEvent(){
            Map()
            function Map() {
                        var wrapperObj = {
                            'id': 'wrapper',
                            'style': `width: 100%;
                          height: 100%;
                          position: relative;`
                        },
                            svgObj = {
                                'id': 'svg',
                                'xmlns': 'http://www.w3.org/2000/svg',
                                'viewBox': '0 0 700 700',
                                'style': `width: 100%;height: 100%;`
                            },
                            toolTipObj = {
                                'class': 'toolTip',
                                'style': `position:absolute; display: none; background: rgb(128, 217, 248);width: 120px;height: 50px;
                            opacity: 0.5;border-radius: 2px; `
                            },
                            wrapper1, svg

                        //普通标签制造工厂
                        function createTag(Tag, attObj) {
                            Tag = document.createElement(Tag)
                            for (att in attObj) {
                                Tag.setAttribute(att, attObj[att])
                            }
                            return Tag
                        }
                        //svg标签制造工厂
                        function createTagns(Tag, attObj) {
                            Tag = document.createElementNS('http://www.w3.org/2000/svg', Tag)
                            if (!attObj) {
                                return Tag
                            }
                            for (att in attObj) {
                                Tag.setAttribute(att, attObj[att])
                            }
                            return Tag
                        }
                        
                        wrapper1 = createTag('div', wrapperObj)
                        svg = createTagns('svg', svgObj)
                        toolTip = createTag('div', toolTipObj)
                        dom.appendChild(wrapper1)
                        dom.appendChild(toolTip)
                        document.getElementById('wrapper').appendChild(svg)
                        // console.log('onload 结束!!!!')


                        var dataValueinit = [7, 1, 2, 3, 4, 5, 6, 7],
                            dataValue = getDatavalue(dataValueinit),
                            dataColor = [0, 0.8],
                            dataHeight = [650, 500],
                            idChangeArea = ['古荥镇', '花园口镇', '大河路', '新城', '迎宾路', '老鸭陈', '长兴路', '刘寨']
                        x1 = getX(dataColor)[0],
                            x2 = getX(dataColor)[1],
                            y1 = getY(dataValue)[0],
                            y2 = getY(dataValue)[dataValue.length - 1],
                            z1 = getZ(dataHeight)[0],
                            z2 = getZ(dataHeight)[1],

                            //mapInit地图的初始化
                            data = {
                                dataPath: [
                                    'M134.94,288.49c8,2.75,10.12,10.09,13.35,16.45a13.1,13.1,0,0,0,2.09,3.33c2.22,2.32,4.64,4.43,6.48,7.13,2.28,3.37,6.53,4.28,9.38,6.73a131.81,131.81,0,0,1,13.62,14.41,26.43,26.43,0,0,1,3.78,4.64c-3.8-.05-7.38.5-11,.76-10.17.76-20.31,1.82-30.44,3a75.76,75.76,0,0,1-10.11.06c-2.05-.05-3.2.15-2.45,2.79a28,28,0,0,1,.83,9.53c-.18,2.73,2.1,4.05,3.75,5.16,6,4,8.82,10.35,12.79,15.85,1.63,2.26.58,5.08.64,7.64,0,1.74-2,1.5-2.83,1.64a110.6,110.6,0,0,1-33.19,1c-10.83-1.41-21.22-.79-29.88,7.07-2.86,2.6-5.85,2.31-9.17.71C67.82,394,63.15,391.41,58,390c-1.57-.42-.9-1.56-.94-2.39-.32-6-3-10.34-7.57-14.31-3.8-3.28-8.07-5.5-12.19-8.12-3.39-2.15-5.54-9.39-4.07-14.45a29.59,29.59,0,0,0,1.2-12.41c-.92-6.22,2-9.63,6.8-12.94,7-4.87,11.65-11.86,15-19.64,2-4.56.45-9-2-12.42-3.51-4.9-6.73-9.76-8-15.7-.64-3.09-3.48-4.78-4.35-7.84-1.72-6,0-11.67,1-17.4,1.6-8.67,2.18-17.25-.49-25.83-1.39-4.48.3-7.61,4.93-9.05,3.29-1,4.81-2.64,4.47-6.36-.7-7.54,4.19-12.12,9.49-16.31A14.72,14.72,0,0,0,66,189c2-4.89,5.82-8.25,10.08-10.95a32,32,0,0,0,5.76-4.51c2.58-2.59,5.47-2.63,8-.08a73.58,73.58,0,0,0,38.33,20.48,50.29,50.29,0,0,0,19.7-.21c7.52-1.54,12.58,0,16.23,6,1.71,2.83,2,6.34,2.2,9.43.26,4.69,1.23,9.35.93,14.06a13.65,13.65,0,0,0,1.49,6.33c3.78,8.95,11.73,11.54,20.13,12.52,9.65,1.14,19.36-.86,29.06-.67a10.8,10.8,0,0,0,4.18-1.14c4.84-2,10-2,15.09-2.56,4.62-.54,9.33-.74,13.81-1.86,3.48-.86,5.19-.24,6.29,3.16,1.57,4.83,4.46,9.15,5.48,14.21.12.56.72,1,.18,1.63-5.65,6.31-3.23,13.7-2.83,20.83.26,4.66.76,9.35-1.35,13.81-.72,1.5-1.39,1.53-2.85.8-6.11-3.06-12.58-1.48-18.94-1.16-.35,0-.71.34-1.05.3-8.34-.94-16.47,1.82-24.74,1.47-4.1-.17-7.93-2.13-12.11-2.45-4.73-.36-9.41-1.44-14.14-2-10.26-1.09-20.55-1.93-30.8-3C148.78,282.89,143.23,284.13,134.94,288.49Z',
                                    'M614.31,403c-3.3-7.18-6.14-13.46-9.08-19.68-1.62-3.43-4.88-4.35-8.49-3.25-5.28,1.62-9.47,4.82-13.47,8.37-1.7,1.51-2.95,2-3.93-.63a3.76,3.76,0,0,0-2.07-2.36c-6.95-3.28-12.21-8.89-18.24-13.45-2-1.55-4.48-2.91-6.95-2.83-4.87.14-9.66-.55-14.45-.94-16.12-1.33-32.25-1.43-48.4-1.55-5.71,0-11.41-1.35-17.11-2.14-8.71-1.21-15.85,2.23-22.85,7-7.72,5.26-16.38,9-24.67,13.3-1.65.86-1.82-.31-2.16-1.12-1.68-4-2.66-8.34-5.78-11.63-4.36-4.61-9.65-8.05-14.76-11.7-6.75-4.84-14.47-8.74-18.88-16-4.56-7.53-7.75-15.61-6.18-25,1.33-7.92,2.93-15.79,4.14-23.73.35-2.3,1.76-4.29,1.58-7.84,5.76,6.27,12.82,6.56,19.3,5.27,8.81-1.76,17.58-1.6,26.28-1.09,18.45,1.07,36.88.12,55.32.64a49.19,49.19,0,0,1,8.6,1.5,2.93,2.93,0,0,1,2.09,2c2.49,8.41,3.63,7.93,13.35,9.09,4.68.56,9.53-.29,14.23.18,8.55.86,16.11-1.79,23.64-5.29,5.91-2.75,12.16-4.81,18-7.6,4.4-2.09,6.73,1.07,9.19,3.19,6.65,5.74,13,11.81,19.44,17.82,5.26,4.91,10.5,9.87,15.64,14.91a40.8,40.8,0,0,1,5.56,6.42c3.2,4.82,7.81,6.76,13.2,8.12,3.85,1,7.62,2.31,11.55,3.07a2.59,2.59,0,0,1,.64.37c1.74,1,4.52-1.39,5.5,1.33.7,1.94-.39,4.16-.8,6.13-1.07,5.12-.34,10.32-1.21,15.44-.46,2.68-1,4.7-3.67,5.73a79.29,79.29,0,0,0-11.59,6c-6.42,3.86-9.34,9.83-11,16.63C615.45,399.06,615,400.49,614.31,403Z',
                                    'M215.22,326.36a1.32,1.32,0,0,0-.47-.09c-13.57.2-27.12-1.38-40.7-.72a4.1,4.1,0,0,1-4.11-2.21,9.82,9.82,0,0,0-5.27-4,14.53,14.53,0,0,1-5.19-3.36c-6.57-6.2-11.26-13.7-15.38-21.6a12.43,12.43,0,0,0-5.42-5.88c5.52-3.14,10.93-3.78,17.06-2.95,4.7.63,9.6.83,14.41,1.12,7.68.46,15.29,2.15,23,2.59s14.78,4.43,22.42,3.18c10.87-1.78,21.85-1.37,32.74-2.49a11.13,11.13,0,0,1,6.43,1.74c4,2.17,3.9,2,5.64-2.37,1.93-4.8,1.52-9.54.85-14.46a55.78,55.78,0,0,1,.58-16.71c0-.23.1-.62.25-.66,6.4-2.08,1.58-6,1-8.64-.84-3.82-3-7.34-4.6-11-.73-1.71-1.75-3.07,1.47-4.05,10.73-3.27,21.28-7.11,31.93-10.65a8.26,8.26,0,0,1,5.41.18c8.33,2.83,15.8,7.18,23.19,11.87,6.48,4.11,10.26,10.38,14.78,16.07,8.28,10.43,16.07,21.24,24.6,31.45,2.72,3.26,6.47,6.35,11.79,5.44,2.62-.45,5.3,1.11,8.06.68.85-.13,1.73.38,1.27,1.21-.89,1.59-.1,4.51-2.65,4.69-9,.64-17.69,4.09-27,3.2-6.84-.66-13.5-2.39-20.37-2.68-5.14-.21-10-2.3-15.27-2-9.58.63-19.13-.7-28.7-.9-3.85-.08-7.76-1.75-11.47-3.16-3.34-1.28-6.29.71-9.47.47-.79-.05-1.38.9-.38,1.86,2.71,2.64,4.48,6.15,8,8.09,2.55,1.41,2.12,4.5,2.95,6.83,1.49,4.15,1,9,4.42,12.48a.78.78,0,0,1-.14,1.27c-6.25,4.39-11.12,10.42-17.5,14.63A57.23,57.23,0,0,1,240,343.32c-7.61,1.14-15.11,3.11-22.88,3.27-2.93.06-3.46-.86-3.41-3.55C213.77,337.47,215.77,332.17,215.22,326.36Z',
                                    'M325,400c-5.83,4.31-11.26.52-16.77-.71-14.8-3.3-29.55-6.83-44.51-9.44-5.68-1-11.48-1.82-16.88-4.28-3.82-1.73-8.16-1.27-12.11-.7-5.52.8-8.25-2.08-11.28-5.85-4.78-5.95-5.12-13.71-8.92-20a22.83,22.83,0,0,1-1.07-2.69,10.88,10.88,0,0,1-.3-7c.77-3,3.72-1,5.66-1.34,13.67-2.13,27.54-3.26,40.4-9,4.77-2.13,8.58-5.54,12.47-8.88,3.27-2.8,6.44-5.72,9.81-8.41,1.19-.95,1.82-2.36,1.11-3.14-3.56-3.88-3.43-9-4.72-13.57-1-3.44-1.92-6.48-5.34-8.16a4.38,4.38,0,0,1-1.07-1c-1.31-1.43-4.12-3.54-3.19-4.46,1.5-1.5,4.44-1.65,6.95-.82,3.2,1.07,6.44,2,9.67,3a6.78,6.78,0,0,0,2.15.42c9-.36,17.85,1.22,26.82.8,7.9-.37,15.55,1.76,23.29,2.89,12.23,1.78,24.35,2.75,36.42-1.07,4.93-1.56,5.66-.55,4.67,4.44-1.08,5.5-2.31,11-2.54,16.64-.11,2.58-.92,4.46-4.13,2.7-.69-.38-1.62-.35-2.38-.83-4.88-3.12-10.37-4.2-15.91-5.69a47.39,47.39,0,0,0-17.08-1.67c-4.25.42-9.47.26-11.64,5.6-.18.44-.6.91-.54,1.31.83,5.37-1.25,10.59-.69,16,.25,2.41-1.08,4.81-1,7.4.08,1.74-1.7.93-2.65,1-7.33.45-14.6-1.19-21.95-.77-1.93.1-3,.15-3.27,2.59-.57,4.32-2.71,8.58-2.53,12.79.23,5.56.23,11.14.6,16.69.17,2.48,3,3.21,4.65,4.4,5.78,4.1,9.48,9.87,13.22,15.58,2,3.11,4.33,4.66,8.12,4.33C320.71,398.89,323.09,398.27,325,400Z',
                                    'M294,367.58a54.8,54.8,0,0,1,1.45-19.87c.66-2.36,1.29-3.76,4.26-3.54,6.8.51,13.63.49,20.44.87,2.89.17,3.88-.69,3.94-3.74.14-7.52,1.49-15,1.4-22.52,0-1.32.67-1.88,1.82-2.42a31.17,31.17,0,0,1,22.87-1.63,31.75,31.75,0,0,0,6,1.27c4.56.43,8.12,2.92,12,4.93,5.54,2.9,5.09,2.92,6.95,8.56,3.36,10.18,7.36,20,17.27,26.14a224,224,0,0,1,21.84,15.85c1.91,1.53,4.3,3.51,4.48,6.83.11,2.07,1.31,4.13,2.24,6.08.44.92.78,1.91-.21,2.15-2.5.61-4.46,2.83-7.1,2.66-5.73-.37-11.36.87-17.07.85a14.78,14.78,0,0,0-9.73,3.35c-3.29,2.67-7.73,2.51-11.66,3.58-8.36,2.28-16.72,4.63-25.54,4.29-4.16-.16-5.16-1-5.39-5.08-.45-8.23-.69-8.36-9.08-8.5a31.51,31.51,0,0,0-5.78.9c-1.56.25-2.41,1.48-2.42,3.25a11.47,11.47,0,0,1-.4,4.4c-.64,1.6-.94,2.77-2.94,1.48a3.24,3.24,0,0,0-2.19-.19c-6.3,1.21-9.63-2.31-12.69-7.18-3.56-5.68-7.48-11.22-13.54-14.68A2.42,2.42,0,0,1,294,373.2C294,371.33,294,369.46,294,367.58Z',
                                    'M173.08,326.89c8.86.63,17.12-.61,25.41.75a42,42,0,0,0,11.59,0c4-.49,4.21,1.81,3.58,4.34-1.6,6.38-1.14,12.95-2.21,19.35-.39,2.34.54,4.08,1.36,6.1,2.26,5.59,4.1,11.35,6.25,17,1.69,4.44,5.42,7.48,8.08,11.26.78,1.1,2.09.49,3.16.55,4.72.26,9.67-1,14.13.47,11.82,4,24.13,5.35,36.23,7.87,11.74,2.45,23.37,5.43,35,8.21,1.1.26,1.88.85.67,2-.09.08-.24.15-.27.26-2.16,8-9.61,6.65-15.09,8.08-16.77,4.37-33.67,8.23-50.57,12-3.88.87-3.6,4.84-6.38,6.67-3.76-4.07-6.49-9.09-10.23-13.37a40.22,40.22,0,0,0-20.3-12.68c-2.22-.61-4.5-1-6.73-1.6-2.9-.78-5.56-2-5.77-5.52-.26-4.72-3.77-7.07-7.09-9.19-5.74-3.67-15.28-4.8-21.77-.4a8.87,8.87,0,0,0-2.63,3.28c-3.75,6.4-10.38,6.3-16.45,7.38-2.12.37-1.88-1.54-1.42-2.47,1.13-2.32.32-4.68.57-7,.06-.57.21-1.47-.48-1.63-3.43-.78-2.55-3.47-2.45-5.63a9.89,9.89,0,0,0-2.62-7.37,115.14,115.14,0,0,1-7.14-10.13c-.35-.49-.52-1.26-1-1.5-6-3-6.91-8.58-7.29-14.44-.13-1.95-.12-3.15,2.58-3.12,11.35.11,22.55-1.82,33.82-2.76,4.78-.4,9.59-1.29,14.44-.93a5.3,5.3,0,0,0,4.41-1.14Z',
                                    'M312.42,412.36c-.3,5.16-4.4,7.68-6.75,11.27a15.33,15.33,0,0,0-2.45,8.91c.09,2.38,1.26,5.35,5.16,4.77,2.62-.39,4.46.11,3,3.71a10.58,10.58,0,0,0-1,5c.23,2.22-1.52,3.22-3.23,4a9.28,9.28,0,0,0-5.25,5.14,2.3,2.3,0,0,1-2.85,1.6c-2.32-.33-2.41,1-1.92,2.71a16.73,16.73,0,0,1,.54,2.11c.75,5.11.75,5.2-4.28,5.64-2.7.23-1.76,1.76-1.29,3.07,1.38,3.81,1,5.09-3,5-4.53,0-8.32,2.65-12.82,2.54-1.8,0-1.12,1.43-.34,2.57,4.54,6.61,9,13.24,13.43,19.94.68,1,3,2.12,1.27,3.57-2,1.69-4.69,2.71-7,.58s-4.46-5-6.73-7.38c-3.18-3.39-5.25-4.16-10.25-1.68-2.26,1.11-4.72,3.67-7.14-.26-.45-.73-2.55-1.1-4.12-1-3,.17-6,.05-9,.05-6.47,0-9.38-4.87-7.16-11,1.21-3.37,2.88-6.58,4-10a55.89,55.89,0,0,0,2.47-7.85c2.16-11.07,2-14.88,0-26.67-1.34-8.19,1-11.86,9.4-13.43,12.52-2.35,24.77-5.85,37.2-8.57C299.11,415.25,305.56,412.89,312.42,412.36Z',
                                    'M312.59,504.54c-5,.38-9.15.71-13-1.44a4.11,4.11,0,0,0-3.54-.51c-2.94,1.5-4.07-.15-5.46-2.28-4-6.21-8.26-12.31-12.39-18.46-.81-1.2-2.39-2.1.81-2.79,4.71-1,9.46-1.94,14.11-3.19,2-.53,2.38.79,3,1.77,1.13,1.7,2.18,3.16,4.56,3.23,1,0,2.88.63,2.18,2.24-2.58,6,1.12,9.94,4.2,14.14C308.78,499.49,310.46,501.71,312.59,504.54Z'
                                ],
                                dataTransform: 'translate(-0.68 -0.68)'
                            },
                            // id寻地区名字对应region[id]
                            regionName = ['no1', 'no2', 'no3', 'no4', 'no5', 'no6', 'no7']
                        // id寻地区数值对应regionValue[id],这个数据是由ajax请求得到然后对应到id上面//注意数组内的变量
                        // regionValue = [value1, value2, vlaue3, value4, value5, value6, value7]



                        //color value height  之间关系的转换!!!!

                        function newcolorChangevalue(x1, x2, y1, y2) {
                            function colorChangevalue(x) {
                                var y = (y2 - y1) / (x2 - x1) * (x - x1) + y1
                                return y
                            }
                            return colorChangevalue
                        }
                        function newvalueChangecolor(x1, x2, y1, y2) {
                            function valueChangecolor(y) {
                                var x = (x2 - x1) / (y2 - y1) * (y - y1) + x1
                                return x
                            }
                            return valueChangecolor
                        }
                        function newcolorChangeheight(x1, x2, z1, z2) {
                            function colorChangeheight(x) {
                                var z = (z2 - z1) / (x2 - x1) * (x - x1) + z1
                                return z
                            }
                            return colorChangeheight
                        }
                        function newheightChangecolor(z1, z2, x1, x2) {
                            function heightChangecolor(z) {
                                var x = (x2 - x1) / (z2 - z1) * (z - z1) + x1
                                return x
                            }
                            return heightChangecolor
                        }
                        //数据声明及其定义    
                        var colorChangevalue = newcolorChangevalue(x1, x2, y1, y2),
                            valueChangecolor = newvalueChangecolor(x1, x2, y1, y2),
                            colorChangeheight = newcolorChangeheight(x1, x2, z1, z2),
                            heightChangecolor = newheightChangecolor(z1, z2, x1, x2)
                        function getX(dataColor) {
                            return dataColor
                        }
                        function getY(dataValue) {
                            var arr1 = dataValue.sort(function (a, b) { return a - b })
                            return arr1
                        }
                        function getZ(dataHeight) {
                            return dataHeight
                        }
                        //拿到dataValue，通过dataValueinit，getDatavalue()
                        function getDatavalue(dataValueinit) {
                            var dataValue = []
                            new function (arr) {
                                for (var x = 0; x < arr.length; x++) {
                                    dataValue.push(dataValueinit[x])
                                }
                            }(dataValueinit)
                            dataValue.sort(function (a, b) {
                                return a - b
                            })
                            return dataValue
                        }

                        //必要节点的声明
                        // var div = document.getElementById('wrapper'),
                        //     svg = document.getElementById('svg')


                        //地图的初始化！
                        function mapInit() {
                            var mapArr = []
                            function getMapstyle() {
                                // path mapStyle = option.mapStyle
                                for (var x = 0; x < dataValueinit.length; x++) {
                                    var mapAtt = {
                                        'id': x,
                                        'class': 'cls-3',
                                        'd': data.dataPath[x],
                                        'transform': data.dataTransform,
                                        'style': (function (a) {
                                            return 'fill:' + 'rgba(147, 235, 248,' + valueChangecolor(dataValueinit[a]) + ');' + `fill-opacity: 0.5;
                                    stroke: rgba(147, 235, 248, 1);
                                    stroke-width: 1;
                                    stroke-opcity: 1;`
                                        })(x)
                                    }
                                    mapArr.push(mapAtt)
                                    // console.log(mapArr)
                                }
                            }
                            getMapstyle()
                            for (var x = 0; x < dataValueinit.length; x++) {
                                var path = createTagns('path', mapArr[x])
                                svg.appendChild(path)
                            }
                        }
                        mapInit()

                        //rect的实现
                        function rectInit() {
                            var rectAtt = getRect(),
                                linearGradienditAtt = {
                                    'id': 'orange_red',
                                    'x1': '0%',
                                    'y1': '0%',
                                    'x2': '0%',
                                    'y2': '100%'
                                },
                                stop1Att = {
                                    'offset': '100%',
                                    'style': 'stop-color:rgba(147, 235, 248, 0.2);stop-opacity: 1'
                                },
                                stop2Att = {
                                    'offset': '0%',
                                    'style': 'stop-color:rgba(147, 235, 248, .8);stop-opacity: 1'
                                }
                            var linear = createTagns('linearGradient', linearGradienditAtt),
                                stop1 = createTagns('stop', stop1Att),
                                stop2 = createTagns('stop', stop2Att)
                            svg.appendChild(createTagns('defs', {}))
                            document.getElementsByTagName('defs')[0].appendChild(linear)
                            document.getElementsByTagName('linearGradient')[0].appendChild(stop2)
                            document.getElementsByTagName('linearGradient')[0].appendChild(stop1)
                            function getRect() {
                                rectAtt = {
                                    'x': 60,
                                    'y': 500,
                                    'width': 20,
                                    'height': 150,
                                    'style': 'fill:url(#orange_red);stroke-width: 1;stroke: rgb(0, 0, 0);'
                                }
                                return rectAtt
                            }
                            var rect = createTagns('rect', rectAtt)
                            svg.appendChild(rect)
                        }
                        rectInit()

                        //polygon旁边数字以及顶部字母提示实现
                        function createText() {
                            var textUpAtt = getText(1),
                                textDownAtt = getText(2),
                                wordUpAtt = getWord(1),
                                wordDownAtt = getWord(2),
                                textUp = createTagns('text', textUpAtt),
                                textDown = createTagns('text', textDownAtt),
                                wordUp = createTagns('text', wordUpAtt)
                            wordDown = createTagns('text', wordDownAtt)
                            textUp.innerHTML = dataValue[dataValue.length - 1]
                            textDown.innerHTML = dataValue[0]
                            wordUp.innerHTML = 'Hight'
                            wordDown.innerHTML = 'Low'
                            function getText(x) {
                                var textAtt = {
                                    'x': '100',
                                    'style': 'fill: black; font-size: 14px; text-anchor: start;'
                                }
                                if (x - 1) {
                                    textAtt.y = '665'
                                } else {
                                    textAtt.y = '500'
                                }
                                return textAtt
                            }
                            function getWord(x) {
                                var wordAtt = {
                                    'x': '48',
                                    'style': 'fill: #black; font-size: 14px; text-anchor: start;'
                                }
                                if (x - 1) {
                                    wordAtt.y = '670'
                                } else {
                                    wordAtt.y = '488'
                                }
                                return wordAtt
                            }
                            svg.appendChild(textUp)
                            svg.appendChild(textDown)
                            svg.appendChild(wordUp)
                            svg.appendChild(wordDown)
                        }
                        createText()

                        //title的实现出现在右上角
                        // function titleInit() {
                        //     var titleAtt = getTitleAtt(),
                        //         title = createTagns('text', titleAtt)
                        //     function getTitleAtt() {
                        //         var titleAtt = {
                        //             'x': 0,
                        //             'y': 50,
                        //             'style': 'color: white; font-size: 20px; text-anchor: start;'
                        //         }
                        //         return titleAtt
                        //     }
                        //     title.innerHTML = '惠济区地图！！'
                        //     svg.appendChild(title)
                        // }
                        // titleInit()


                        //polygon的实现
                        function polygonInit() {
                            var polygonUpAtt = getPolygonAtt(1),
                                polygonDownAtt = getPolygonAtt(2),
                                polygonUp = createTagns('polygon', polygonUpAtt)
                            polygonDown = createTagns('polygon', polygonDownAtt)
                            function getPolygonAtt(x) {
                                if (x - 1) {
                                    var polygonAtt = {
                                        'style': 'fill: rgba(147, 235, 248, .2); stroke: #000000; stroke-width: 1; '
                                    }
                                    polygonAtt.points = '80,650 95,650 95,665'
                                } else {
                                    var polygonAtt = {
                                        'style': 'fill: rgba(147, 235, 248, .8); stroke: #000000; stroke-width: 1; '
                                    }
                                    polygonAtt.points = '80,500 95,500 95,485'
                                }
                                return polygonAtt
                            }
                            svg.appendChild(polygonUp)
                            svg.appendChild(polygonDown)
                        }
                        polygonInit()
                        //========================================================================================================================
                        //========================================================================================================================
                        //EventListener的初始化
                        function eventInit() {
                            var rect = document.getElementsByTagName('rect')[0],
                                div = document.getElementById('wrapper'),
                                path = document.getElementsByTagName('path'),
                                toolTip = document.getElementsByClassName('toolTip')[0],
                                svg = document.getElementById('svg'),
                                polygon = document.getElementsByTagName('polygon')[0],
                                flag, flag2 = true

                            //toolTip
                            document.onmousemove = function (e) {
                                flag = e.srcElement.getAttribute('class')
                                var flag1 = flag && flag.search('cls') + 1
                                console.log('flag1:' + flag1)
                                if (flag1) {
                                    toolTip.style.display = 'block'
                                } else {
                                    toolTip.style.display = 'none'
                                }
                            }

                            div.onmousemove = function (e) {
                                if (flag) {
                                    // var X = e.clientX - div.offsetLeft,
                                    //     Y = e.clientY - div.offsetTop
                                    var X = e.clientX,
                                        Y = e.clientY 
                                    // console.log('x:' + X, 'y:' + Y)
                                    // console.log('div.offsetLeft: ' + div.offsetLeft + 'div.offsetTop: ' + div.offsetTop)
                                    // rect1.setAttribute('x',e.clientX)/*  错位问题 */
                                    // rect1.setAttribute('y',e.clientY)
                                    toolTip.style.display = 'block'
                                    toolTip.style.left = X + 50 + 'px'
                                    toolTip.style.top = Y + 50 + 'px'
                                    toolTip.innerHTML = '地区：' + idChangeArea[e.srcElement.getAttribute('id')] + '<br><p>反馈量：' + dataValueinit[e.srcElement.getAttribute('id')] + '<p/>'
                                }
                            }

                            //hover的实现
                            function initPathHover() {
                                for (var x = 0; x < path.length; x++) {
                                    +function (a) {
                                        path[a].onmouseover = function () {
                                            this.setAttribute('class', 'cls-3 cls-3hover')
                                            var height = colorChangeheight(valueChangecolor(dataValueinit[a])),
                                                polyFlag = document.getElementById('polyFlag'),
                                                textValue = document.getElementById('textValue')
                                            if (polyFlag && textValue) {
                                                clearAngleAndText()
                                            }
                                            createRect(height)
                                        }
                                    }(x);

                                    path[x].onmouseout = function () {
                                        // console.log(valueChangecolor)
                                        this.setAttribute('class', 'cls-3')
                                        clearAngleAndText()
                                    }
                                }
                            }
                            function clearAngleAndText() {
                                var polyFlag = document.getElementById('polyFlag'),
                                    textValue = document.getElementById('textValue')
                                svg.removeChild(polyFlag)
                                svg.removeChild(textValue)
                            }
                            //由地图转换成三角形的位置
                            function createRect(y) {
                                var polyObj = {
                                    'id': 'polyFlag',
                                    'points': '80,' + (y - 5) + ' 80,' + (y + 5) + ' 87,' + y,
                                    'style': 'fill: black;'
                                },
                                    textObj = {
                                        'id': 'textValue',
                                        'x': 87,
                                        'y': y + 6,
                                        'fill': '#black',
                                        'font-size': 15,
                                        'text-anchor': 'start'
                                    },
                                    newText = createTagns('text', textObj),
                                    newAngle = createTagns('polygon', polyObj)
                                newText.innerHTML = '≈' + colorChangevalue(heightChangecolor(y)).toFixed(2)
                                svg.appendChild(newAngle)
                                svg.appendChild(newText)
                            }
                            //动态生成三角形并计算值，显示
                            rect.onmousemove = function (e) {
                                //全部变成原来的颜色
                                for (var x = 0; x < path.length; x++) {
                                    path[x].setAttribute('class', 'cls-3')
                                }
                                // console.log(svg)
                                var main = document.getElementsByClassName('content3')[0],
                                    x = e.clientX - div.offsetLeft,
                                    y = (e.clientY - div.offsetTop) * 700 / main.offsetHeight
                                // console.log('x : ' + x + '; y ' + y + ';')
                                // console.log('Height::::' + main.offsetHeight)
                                // console.log('Width::::' + main.offsetWidth)
                                if (flag2) {
                                    createRect(y)
                                    flag2 = false
                                } else {
                                    var polyFlag = document.getElementById('polyFlag'),
                                        textValue = document.getElementById('textValue')
                                    textValue.innerHTML = '≈' + colorChangevalue(heightChangecolor(y)).toFixed(2)
                                    textValue.setAttribute('y', y + 6)
                                    polyFlag.setAttribute('points', '80,' + (y - 5) + ' 80,' + (y + 5) + ' 87,' + y)
                                    // console.log(y)
                                    heightPath(checkPath(y))
                                }
                                function checkPath(height) {
                                    var middleValue = colorChangevalue(heightChangecolor(height)),
                                        maxValue = (middleValue + 0.5).toFixed(2),
                                        minValue = (middleValue - 0.5).toFixed(2),
                                        arr = []
                                    // console.log('minValue:::' + minValue)
                                    // console.log('maxValue:::' + maxValue)
                                    // console.log(dataValueinit)
                                    for (var x = 0; x < path.length; x++) {
                                        if (dataValueinit[x] >= minValue && dataValueinit[x] <= maxValue) {
                                            arr.push(x)
                                        }
                                    }
                                    // console.log(arr)
                                    return arr
                                }
                                function heightPath(arr) {
                                    for (var x = 0; x < arr.length; x++) {
                                        path[arr[x]].setAttribute('class', 'cls-3 cls-3hover')
                                    }
                                }
                                rect.onmouseleave = function () {
                                    var polyFlag = document.getElementById('polyFlag'),
                                        textValue = document.getElementById('textValue')
                                    svg.removeChild(polyFlag)
                                    svg.removeChild(textValue)
                                    //离开全恢复原来的样子！
                                    for (var x = 0; x < path.length; x++) {
                                        path[x].setAttribute('class', 'cls-3')
                                    }
                                    flag2 = true
                                }

                            }
                            initPathHover()
                        }
                        eventInit()

                        //地图的hover实现

                    }
        }
</script>
</html>